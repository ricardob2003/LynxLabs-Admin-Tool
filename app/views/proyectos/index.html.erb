<div class = "page-container">
  <%= form_tag(proyectos_path, method: "get", id: "filter-form") do %>
    <%= label_tag :status, "Proyectos:" %>
    <%= select_tag :status, options_for_select([['Asignado', 'Asignado'], ['Development', 'Development'], ['Production', 'Production'], ['Entregado', 'Entregado']], params[:status]), prompt: 'Todos los Proyectos', onchange: "this.form.submit();" %>
  <% end %>
  <div class="table-container"> <!-- Custom CSS styling class -->
    <table class="projects-table table">
      <thead>
        <tr>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Nombre</th>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Cliente</th>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Fecha de Inicio</th>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Fecha de Entrega Estimada</th>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Status</th>
          <th style="background-color: #470247; color: #ededed; font-weight: bold;">Bitacora del Proyecto</th>
          <th colspan="2" style="background-color: #470247; color: #ededed; font-weight: bold;">Acciones de Proyecto</th>
        </tr>
      </thead>
      <tbody>
        <% @proyectos.each do |proyecto| %>
          <tr>
            <td style="color: #000000;">
              <%= link_to proyecto.name, proyecto_path(proyecto), style: "color: #000000; text-decoration: none; font-weight: bold;" %>
            </td>
            <td style="color: #000000;"><%= proyecto.cliente %></td>
            <td style="color: #000000;"><%= proyecto.start_date ? proyecto.start_date.strftime("%d %b %Y") : 'N/A' %></td>
            <td style="color: #000000;"><%= proyecto.end_date.strftime("%d %b %Y") %></td>
            <td style="color: #000000;"><%= proyecto.status %></td>
            <td style="color: #000000;">
              <%= truncate(proyecto.bitacora_del_proyecto, length: 75) %>
            </td>
            <td>
              <%= link_to "Eliminar Proyecto", proyecto_path(proyecto),data: { turbo_method: :delete, turbo_confirm: "Estás seguro de que quieres eliminar este proyecto? Esta acción no se puede deshacer." }, class: "btn btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <%= link_to "Crear Nuevo Proyecto", new_proyecto_path(@proyectos), class: "btn btn-primary square-button btn-block btn-lg", "data-bs-toggle": "button", role: "button" %>
</div>
